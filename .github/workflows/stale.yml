name: Mark stale issues and pull requests

on:
  schedule:
    - cron: "0 0 * * *" # Run daily at midnight UTC
  workflow_dispatch: # Allow manual triggering

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}

          # Issue settings
          days-before-issue-stale: 90
          days-before-issue-close: 14
          stale-issue-message: >
            This issue has been automatically marked as stale because it has not had
            recent activity in the last 90 days. It will be closed in 14 days if no
            further activity occurs. Thank you for your contributions.

            If you believe this issue is still relevant, please add a comment to keep it open.
          close-issue-message: >
            This issue has been automatically closed due to inactivity.
            If you still believe this is relevant, please reopen the issue or create a new one.
          stale-issue-label: "stale"
          exempt-issue-labels: "pinned,security,help-wanted,good-first-issue,needs-triage"

          # Pull request settings
          days-before-pr-stale: 45
          days-before-pr-close: 14
          stale-pr-message: >
            This pull request has been automatically marked as stale because it has not had
            recent activity in the last 45 days. It will be closed in 14 days if no
            further activity occurs. Thank you for your contributions.

            If this PR is still relevant, please rebase and update it.
          close-pr-message: >
            This pull request has been automatically closed due to inactivity.
            If you would like to continue working on this, please reopen the PR or create a new one.
          stale-pr-label: "stale"
          exempt-pr-labels: "pinned,security,work-in-progress"

          # General settings
          operations-per-run: 100
          remove-stale-when-updated: true
          ascending: true
